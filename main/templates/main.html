{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div class="text-center mt-5">
        <h1 class="display-4">Inventory Gacor</h1>
        <a href='https://youtu.be/xvFZjo5PgG0?si=JZ-ebX8f-Ef07mmZ'>
            <img src="https://i.postimg.cc/d0BS4khx/Mega-Jackpot-Merah-Klikhoki.gif" alt="Jackpot Image" class="img-fluid mt-3">
        </a>
    </div>
    <div class="mt-5">
        <h5>Name:</h5>
        <p class="lead">{{ name }}</p>

        <h5>Class:</h5>
        <p>{{ class }}</p>

        {% if products %}
            <p>Kamu menyimpan {{ products|length }} item pada aplikasi ini</p>
        {% else %}
            <p>Tidak ada item yang disimpan pada aplikasi ini.</p>
        {% endif %}
        {% if products %}    
        <table class="table table-striped mt-3">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Amount</th>
                    <th>Description</th>
                    <th>Date Added</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
            {% for product in products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.amount }}</td>
                <td>{{ product.description }}</td>
                <td>{{ product.date_added }}</td>
                <td>
                    <form action="{% url 'main:increase_product_quantity' product.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-primary btn-sm">+</button>
                    </form>
                    <form action="{% url 'main:decrease_product_quantity' product.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-danger btn-sm">-</button>
                    </form>
                    <form action="{% url 'main:delete_product' product.id %}" method="post" style="display: inline;">
                        {% csrf_token %}
                        <button type="submit" class="btn btn-warning btn-sm">Hapus</button>
                    </form>
                </td>
            </tr>
            {% if forloop.first %}
            <style>
                tr:last-child {
                    background-color: #f8d7da;
                }
            </style>
            {% endif %}
        {% endfor %}

            </tbody>
        </table>
        {% endif %}
    </div>
    <div class="text-center mt-3">
        <a href="{% url 'main:create_product' %}" class="btn btn-success">Add New Product</a>
        <a href="{% url 'main:logout' %}" class="btn btn-danger">Logout</a>
        <h5 class="mt-3">Sesi terakhir login: {{ last_login }}</h5>
    </div>
</div>
{% endblock content %}
